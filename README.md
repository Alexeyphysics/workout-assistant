# Workout Assistant

## Название и назначение сервиса

**Workout Assistant** — сервис для тренировок в спортзале, помогает анализировать тренировки, содержит базу с видеогидами.

**Роль в системе:**
- Аутентификация (Sanctum): Регистрация, вход, выход пользователей.
- Тренировки: Хранение и анализ данных о тренировках.
- Интеграция с другими микросервисами: Микросервис взаимодействует с другими микросервисами через API для получения/передачи необходимых данных.

**Основные функции:**
- Регистрация новых пользователей.
- Аутентификация и получение токенов доступа.
- Отзыв токенов.
- Сохранение информации о тренировке в зале.
- Просмотр результатов по упражнениям.
- Анализ отстающих групп мышц.

## Архитектура и зависимости

### Технологии и фреймворки
- **PHP 8.2**
- **Laravel 12.0**
- **Laravel Sanctum** – для аутентификации и управления токенами API.
- **Pest PHP** – для unit-тестирования.

## Способы запуска сервиса

### Запуск

1. **Установка зависимостей:**
   ```bash
   composer install
   ```
2. **Настройка окружения:**
    - Скопируйте `.env.example` в `.env` и настройте необходимые переменные.
3. **Генерация ключа приложения:**
   ```bash
   php artisan key:generate
   ```
4. **Запуск локального сервера:**
   ```bash
   php artisan serve
   ```
   Сервис будет доступен по адресу: [http://localhost:8000](http://localhost:8000)

## API

### Основные эндпоинты:
- **POST /api/v1/register**  
  **Описание:** Регистрирует нового пользователя.  
  **Параметры:** name, email, password

- **POST /api/v1/login**  
  **Описание:** Выполняет аутентификацию пользователя и возвращает токен Sanctum.  
  **Параметры:**
    - `email` (string, required)
    - `password` (string, required)
  
  **Заголовки:**
  - `Accept: application/json`
    **Ответ (200 OK):**
  ```json
  {
    "data": {
      "access_token": "<sanctum_token>",
      "token_type": "Bearer"
    },
    "meta": null
  }

- **POST /api/v1/logout**  
  **Описание:** Инвалидирует текущий токен доступа.

- **GET /api/v1/users**  
  **Описание:** Возвращает информацию об аутентифицированном пользователе.

- **GET /api/v1/user-exercise-progress**  
  **Описание:** Возвращает результаты пользователя в упражнении.

- **POST /api/v1/workouts**  
  **Описание:** Сохраняет информацию о тренировке в базу данных.

- **GET /api/v1/lagging-muscle-groups**  
  **Описание:** Возвращает список отстающих групп мышц отсортированный от наиболее отстающих к наименее отстающим.

## Тестирование

**Настройка окружения:**
- Создайте `.env.testing`, скопируйте туда данные из `.env.example`и настройте необходимые переменные, в частности подключение к тестовой БД.

### Запуск тестов
```bash
php artisan test
```

## Контакты и поддержка

- **Разработчик:** Горюнов Илья
- **Telegram:** @ilyshka_k
- **Email:** ilyagorunov.04@gmail.com
